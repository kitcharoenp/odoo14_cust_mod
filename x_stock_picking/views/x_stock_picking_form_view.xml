<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="x_stock_picking_form_view" model="ir.ui.view">
      <field name="name">xstock.picking.form</field>
      <field name="model">stock.picking</field>
      <field name="inherit_id" ref="stock.view_picking_form"/>
      <field name="arch" type="xml">

        <!-- hide 'duplicate' button -->
        <xpath expr="//form" position="attributes">
                <attribute name="duplicate">false</attribute>
        </xpath>

        <!-- hide 'create' button -->
        <xpath expr="//form" position="attributes">
                <attribute name="create">false</attribute>
        </xpath>

        <!-- hide 'delete' button -->
        <xpath expr="//form" position="attributes">
                <attribute name="delete">false</attribute>
        </xpath>

        <!-- hide 'print' button -->
        <xpath expr="//form" position="attributes">
                <attribute name="print">false</attribute>
        </xpath>

        <!-- invisible 'Mark as Todo' button -->
        <xpath expr="//button[@name='action_confirm']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <!-- invisible 'Check Availability' button -->
        <xpath expr="//button[@name='action_assign']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <!-- invisible 'Validate' button -->
        <xpath expr="//button[@name='button_validate']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <!-- invisible 'Print' button -->
        <xpath expr="//button[@name='do_print_picking']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <!-- invisible 'Unreserve' button -->
        <xpath expr="//button[@name='do_unreserve']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <!-- invisible 'Print' button -->
        <xpath expr="//button[6]" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath> 

        <!-- invisible 'Return' button -->
        <xpath expr="//button[7]" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath> 

        <!-- invisible 'Scrap' button -->
        <xpath expr="//button[@name='button_scrap']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <!-- invisible 'Lock' button -->
        <xpath expr="//button[@name='action_toggle_is_locked']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <!-- invisible 'Scraps' button -->
        <xpath expr="//button[@name='action_see_move_scrap']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <!-- invisible 'Packages' button -->
        <xpath expr="//button[@name='action_see_packages']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <!-- invisible 'Operations' button -->
        <xpath expr="//button[@name='action_picking_move_tree']" position="attributes">
          <attribute name="attrs">{'invisible' : [('state', '!=', '')]}</attribute>
        </xpath>

        <xpath expr="//button[@name='action_cancel']" position="attributes">
          <attribute name="class">btn-danger text-uppercase</attribute>
        </xpath>

        <!-- visible 'Sync' button -->
        <xpath expr="//button[@name='action_cancel']" position="after">
          <button 
            name="action_sync" 
            attrs="{'invisible': [('x_workorder_id', '=', False)]}"
            string="Sync" 
            groups="base.group_user" 
            type="object"
            class="btn-warning text-uppercase"/>
        </xpath>


        <!-- insert a `x_workorder_id` field  -->
        <xpath expr="//field[@name='backorder_id']"
            position="after">
            <field name="x_workorder_id" readonly="1" decoration-bf="1"/>
        </xpath>

        <!-- set readonly attribute -->
        <xpath expr="//field[@name='partner_id']" position="attributes">
          <attribute name="readonly">1</attribute>
        </xpath>
        
        <xpath expr="//field[@name='picking_type_id']" position="attributes">
          <attribute name="readonly">1</attribute>
        </xpath>

        <xpath expr="//field[@name='scheduled_date']" position="attributes">
         <attribute name="invisible">1</attribute>
        </xpath>

        <xpath expr="//field[@name='date_done']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

        <xpath expr="//field[@name='date_deadline']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

        <xpath expr="//field[@name='origin']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

        <!-- insert a `crm_document_name` field  -->
        <xpath expr="//field[@name='date_done']"
            position="after">
            <field name="x_crm_document_id" readonly="1"/>
            <field name="x_crm_document_name" readonly="1" decoration-bf="1" decoration-success="x_crm_document_name != ''"/>
            <field name="x_crm_document_status" readonly="1" decoration-bf="1" decoration-info="x_crm_document_name != ''"/>
        </xpath>

        <!-- replace a `product_id` field  -->
        <xpath expr="//page[@name='operations']//field[@name='product_id']" 
            position="replace">
          <field 
            name="product_id" 
            required="1" 
            context="{'default_type': 'product'}" 
            options="{'no_open': True, 'no_create': True}"
          />
        </xpath>

        <!-- invisible 'forecast_availability' field -->
        <xpath expr="//page[@name='operations']//field[@name='forecast_availability']" 
            position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

        <!-- invisible 'date_deadline' field -->
        <xpath expr="//page[@name='operations']//field[@name='date_deadline']" 
            position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

        <!-- invisible 'product_uom_qty' field `Demand` -->
        <xpath expr="//page[@name='operations']//field[@name='product_uom_qty']" 
            position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>


        <!-- insert fields before 'product_uom_qty' field  -->
        <xpath expr="//page[@name='operations']//field[@name='product_uom_qty']" 
            position="before">
          <field name="x_plan_qty" />
          <field name="x_drum_no" optional="hide"/>
          <field name="x_mark1" optional="hide"/>
          <field name="x_mark2" optional="hide"/>

        </xpath>


        <!-- invisible 'quantity_done' field `Done` -->
        <xpath expr="//page[@name='operations']//field[@name='quantity_done']" 
            position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>


        <!-- invisible 'user_id',move_type field in `extra` page -->
        <xpath expr="//page[@name='extra']//field[@name='user_id']" position="attributes">
          <attribute name="readonly">1</attribute>
        </xpath>

        <xpath expr="//page[@name='extra']//field[@name='move_type']" position="attributes">
          <attribute name="readonly">1</attribute>
        </xpath>


      </field>

    </record>
</odoo>